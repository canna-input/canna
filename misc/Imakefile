/* $Id: Imakefile,v 1.2.2.1 2003/01/13 05:34:30 aida_s Exp $ */
#include "../Canna.conf"

CANNAROOT = ..

#define IHaveSubdirs
#define PassCDebugFlags

#ifdef engineSwitch
       PROGRAMS = engine.cf
           SRCS = engine.cpp
#else
       PROGRAMS = 
#endif
#ifdef nec
        DEFINES = $(SCRIPTS_DEFINES) -DLIBCANNADIR=$(libCannaDir) \
                  -DCPP=$(CPP) -DCANNA_DSOREV=$(cannaDsoRev) -Unec
#else
        DEFINES = $(SCRIPTS_DEFINES) -DLIBCANNADIR=$(libCannaDir) \
		  -DCPP=$(CPP) -DCANNA_DSOREV=$(cannaDsoRev)
#endif

SUBDIRS =initfiles

AllTarget($(PROGRAMS))

#ifdef engineSwitch
CppScriptTarget(engine.cf,engine.cpp,$(DEFINES),/**/)
InstallNonExec(engine.cf,$(cannaLibDir))
#endif

MakeSubdirs($(SUBDIRS))
DependSubdirs($(SUBDIRS))
MakeLintLibSubdirs($(SUBDIRS))
MakeLintSubdirs($(SUBDIRS),install.ln,install.ln)

MakeDirectories(install,$(cannaLibDir)/sample/src)
#if defined(nec_ews_svr4) || defined(pcux_r32)
InstallNamedNonExec(rMakefile,Makefile,$(cannaLibDir)/sample/src)
#else
InstallNamedNonExec(cMakefile,Makefile,$(cannaLibDir)/sample/src)
#endif /* nec_ews_svr4 */

InstallNonExec(is.c,$(cannaLibDir)/sample/src)

clean::
	$(RM) $(PROGRAMS)

DependDependency()
